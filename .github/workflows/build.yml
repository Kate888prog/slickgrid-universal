name: ğŸ—ï¸ Build via Root Commands

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4
      
    - name: âš™ï¸ Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        
    - name: ğŸ“¦ Install pnpm
      run: npm install -g pnpm
      
    - name: ğŸ“š Install dependencies
      run: pnpm install
      
    - name: ğŸ—ï¸ Build Angular via root command
      run: |
        # Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ ĞºĞ¾Ñ€Ğ½ĞµĞ²ÑƒÑ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
        pnpm angular:build:framework
        echo "âœ… Angular Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ° ÑĞ¾Ğ±Ñ€Ğ°Ğ½Ğ°!"
      
    - name: ğŸ“¦ Package results
      run: |
        # Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ’Ğ¡Ğ Ñ‡Ñ‚Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¾ÑÑŒ
        zip -r angular-build-results.zip \
          frameworks/angular-slickgrid/ \
          packages/ \
          -x "*/node_modules/*" "*/.*"
        
        echo "ğŸ“¦ Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ°Ñ€Ñ…Ğ¸Ğ²Ğ°: $(du -h angular-build-results.zip)"
      
    - name: â¬†ï¸ Upload results
      uses: actions/upload-artifact@v4
      with:
        name: angular-build-output
        path: angular-build-results.zip
