name: üéØ Build Angular Demo

on:
  workflow_dispatch:

jobs:
  build-demo:
    runs-on: ubuntu-latest
    
    steps:
    - name: üì• Checkout code
      uses: actions/checkout@v4
      
    - name: ‚öôÔ∏è Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        
    - name: üì¶ Install pnpm
      run: npm install -g pnpm
      
    - name: üìö Install dependencies
      run: pnpm install
      
    - name: üèóÔ∏è Build Angular DEMO
      run: |
        cd frameworks/angular-slickgrid
        pnpm run build:demo
        echo "‚úÖ –î–µ–º–æ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±—Ä–∞–Ω–æ!"
      
    - name: üîç Find demo files
      run: |
        echo "–ò—â–µ–º —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–µ–º–æ..."
        find frameworks/angular-slickgrid -name "index.html" -o -name "*.js" | grep -v node_modules
        
        echo "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏ angular-slickgrid:"
        ls -la frameworks/angular-slickgrid/
        
        # –î–µ–º–æ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –≤ dist/angular-slickgrid/browser/ –∏–ª–∏ –ø–æ–¥–æ–±–Ω–æ–π –ø–∞–ø–∫–µ
        if [ -d "frameworks/angular-slickgrid/dist" ]; then
          echo "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ dist:"
          ls -la frameworks/angular-slickgrid/dist/
          find frameworks/angular-slickgrid/dist -type f -name "*.html" -o -name "*.js" | head -10
        fi
      
    - name: üì¶ Package demo for download
      run: |
        # –°–æ–∑–¥–∞—ë–º –∞—Ä—Ö–∏–≤ –∏–∑ –í–°–ï–ô –ø–∞–ø–∫–∏ angular-slickgrid (–≤–∫–ª—é—á–∞—è —Å–æ–±—Ä–∞–Ω–Ω–æ–µ –¥–µ–º–æ)
        cd frameworks/angular-slickgrid
        zip -r angular-demo-complete.zip .
        echo "üì¶ –ê—Ä—Ö–∏–≤ —Å–æ–∑–¥–∞–Ω!"
        ls -la *.zip
        du -h *.zip
      
    - name: ‚¨ÜÔ∏è Upload for download
      uses: actions/upload-artifact@v4
      with:
        name: angular-slickgrid-with-demo
        path: frameworks/angular-slickgrid/angular-demo-complete.zip
        retention-days: 30
        
    - name: üéâ Success
      run: |
        echo "üéâ –í–°–Å –ì–û–¢–û–í–û!"
        echo "üì• –°–∫–∞—á–∞–π—Ç–µ 'angular-slickgrid-with-demo'"
        echo "–í –∞—Ä—Ö–∏–≤–µ:"
        echo "  - –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ Angular –±–∏–±–ª–∏–æ—Ç–µ–∫–∏"
        echo "  - –°–æ–±—Ä–∞–Ω–Ω–æ–µ –¥–µ–º–æ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–≤ dist/)"
        echo "  - –í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã"
